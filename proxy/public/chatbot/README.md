# AI Chatbot Integration for Moodle

## –®–∞–≥ 1: Deploy —Ñ–∞–π–ª–æ–≤

–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ –∏ –ø—É—à–∞, –Ω–∞ Raspberry Pi –≤—ã–ø–æ–ª–Ω–∏:

```bash
cd /home/admin/moodle
./deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã —á–∞—Ç-–±–æ—Ç–∞ –≤ `/var/www/html/local/aichatbot/`

## –®–∞–≥ 2: –í—Å—Ç—Ä–æ–π —á–∞—Ç-–±–æ—Ç –≤ Moodle

### –ß–µ—Ä–µ–∑ Additional HTML (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

1. –ó–∞–π–¥–∏ –≤ Moodle –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –ü–µ—Ä–µ–π–¥–∏: **Site administration ‚Üí Appearance ‚Üí Additional HTML**
3. –ù–∞–π–¥–∏ –ø–æ–ª–µ **"When BODY is opened"** –∏–ª–∏ **"Before BODY is closed"**
4. –°–∫–æ–ø–∏—Ä—É–π –∏ –≤—Å—Ç–∞–≤—å –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ `moodle-embed.html`
5. –°–æ—Ö—Ä–∞–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ñ–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã:

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

- `http://192.168.178.49:8080/local/aichatbot/chatbot.css`
- `http://192.168.178.49:8080/local/aichatbot/chatbot.js`

–ï—Å–ª–∏ –≤–∏–¥–∏—à—å –∫–æ–¥ - –≤—Å—ë –û–ö! ‚úÖ

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å —á–∞—Ç-–±–æ—Ç

1. –û–±–Ω–æ–≤–∏ –ª—é–±—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É Moodle
2. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ —á–∞—Ç–∞ üí¨ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É
3. –ö–ª–∏–∫–Ω–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É - –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –æ–∫–Ω–æ —á–∞—Ç–∞
4. –ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å –æ—Ç–≤–µ—Ç –æ—Ç AI

## Troubleshooting

### –ß–∞—Ç –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:

- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ñ–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ `/var/www/html/local/aichatbot/`
- –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: `ls -la /var/www/html/local/aichatbot/`
- –û—á–∏—Å—Ç–∏ –∫–µ—à Moodle: **Site administration ‚Üí Development ‚Üí Purge all caches**

### –û—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

- –û—Ç–∫—Ä–æ–π DevTools (F12)
- –ü–æ—Å–º–æ—Ç—Ä–∏ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ API –¥–æ—Å—Ç—É–ø–µ–Ω: `http://192.168.178.49:3000/health`

### –ù–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç–≤–µ—Ç –æ—Ç AI:

- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Ollama –∑–∞–ø—É—â–µ–Ω: `http://192.168.178.35:11434/api/tags`
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Fastify: `docker-compose logs proxy`
- –ü—Ä–æ–≤–µ—Ä—å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## –§–∞–π–ª—ã

- `chatbot.js` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —á–∞—Ç–∞
- `chatbot.css` - —Å—Ç–∏–ª–∏
- `loadingMessage.js` - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
- `removeMessage.js` - —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- `moodle-embed.html` - HTML –∫–æ–¥ –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –≤ Moodle
- `index.html` - standalone –≤–µ—Ä—Å–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## API Endpoints

- `POST /api/chat` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (–æ–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç)
- `POST /api/chat-stream` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (streaming –æ—Ç–≤–µ—Ç)
- `GET /health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
